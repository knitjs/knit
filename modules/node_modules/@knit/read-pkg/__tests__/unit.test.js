/* flow */

const path = require('path');

const rp = require('..');

const PATHS = {
  modules: '',
  modulesStub: '',
  distStub: 'dist',
  libStub: 'lib',
  jsnextStub: 'jsnext',
  umdStub: 'umd',
  lib: '/Users/lib',
  jsnext: '/Users/jsnext',
  umd: '/Users/umd',
};

describe('readPkg', () => {
  it('returns json if package exists', () => {
    require('read-pkg').__setMockPackages({
      [path.join('@scope', 'package')]: { name: '@scope/package' },
    });
    expect(rp('@scope/package', PATHS)).toEqual({ name: '@scope/package' });
  });
  it('throws if package is missing', () => {
    expect(rp('DNE', PATHS)).toThrow();
  });
});
