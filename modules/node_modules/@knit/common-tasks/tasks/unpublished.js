/* @flow */

import type { TModules } from '@knit/knit-core';

import findUnpublishedPackages from '@knit/find-unpublished-packages';

type TCtx = {
  modules: TModules,
  unpublished: TModules,
};

const tasks = [
  {
    title: 'checking for unpublished modules',
    task: (ctx: TCtx) => findUnpublishedPackages(ctx.modules)
      .then(modules => {
        ctx.unpublished = modules;
        ctx.modules = modules;
      }),
  },
];

module.exports = tasks;
